<view class="container">
  <view class="header">
    <text class="page-title">æˆ‘çš„è¯å“</text>
    <view class="add-btn-wrapper" bindtap="goToAdd" id="add-med-btn">
      <text class="add-icon">+</text>
      <text>æ·»åŠ </text>
    </view>
  </view>
  
  <view class="list-container">
    <block wx:if="{{medications.length === 0}}">
      <view class="empty-state">
        <view class="empty-icon-circle">ğŸ’Š</view>
        <text class="empty-title">è¿˜æ²¡æœ‰è¯å“</text>
        <text class="empty-desc">ç‚¹å‡»å³ä¸Šè§’æ·»åŠ æ‚¨çš„ç¬¬ä¸€ä¸ªè¯å“</text>
        <button class="btn-primary mt-40" bindtap="goToAdd">ç«‹å³æ·»åŠ </button>
      </view>
    </block>
    
    <block wx:else>
      <block wx:for="{{medications}}" wx:key="id">
        <view class="med-card">
          <view class="med-color-strip" style="background-color: {{item.color || '#4CAF50'}}"></view>
          <view class="med-content" bindtap="goToEdit" bindlongpress="showActionSheet" data-id="{{item.id}}" data-name="{{item.name}}">
            <view class="med-main">
              <text class="med-name">{{item.name}}</text>
              <text class="med-dosage">æ¯æ¬¡ {{item.dosage}} {{item.unit}}</text>
            </view>
            <view class="med-stock-info">
              <text class="stock-label">å‰©ä½™</text>
              <text class="stock-num {{item.stock < 10 ? 'warning' : ''}}">{{item.stock}}</text>
            </view>
            <view class="med-edit-icon">âœ</view>
          </view>
        </view>
      </block>
    </block>
  </view>

  <spotlight-guide run="{{runGuide}}" steps="{{guideSteps}}" bind:complete="onGuideComplete" />
</view>
